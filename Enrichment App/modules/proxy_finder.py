import logging
logger = logging.getLogger(__name__)

from modules import requestProxy
import ipdb
# go to https://incloak.com/proxy-list/ and use 7 as the access code to get a new list
# add them to the requestProxy.py file and
# url = 'https://www.yelp.com/biz/neza-iron-works-oakland'
url = 'https://www.yelp.com/biz/hey-cookie-san-francisco'
req_proxy = requestProxy.RequestProxy(
    web_proxy_list=["201.175.115.222", "201.173.184.136", "201.166.217.247", "74.196.157.186", "189.218.144.188", "189.219.5.226", "201.173.11.50", "121.43.188.3", "75.107.122.26", "166.62.97.244", "192.99.152.125", "218.85.138.114", "59.58.162.141", "67.14.200.120", "189.219.191.184", "201.173.190.84", "83.166.30.12", "189.218.207.176", "187.160.37.126", "189.218.221.210", "189.219.179.221", "69.14.129.114", "114.88.149.151", "202.119.199.147", "124.163.250.164", "180.166.150.114", "189.218.104.80", "58.221.59.227", "189.219.92.154", "187.161.230.178", "187.161.62.28", "103.195.3.126", "166.62.97.24", "166.62.97.239", "173.255.237.107", "164.132.28.157", "128.71.109.137", "188.93.133.211", "166.62.97.238", "166.62.97.245", "166.62.97.240", "65.87.32.20", "218.75.41.134", "101.81.229.36", "101.81.104.134", "36.80.59.234", "115.29.161.167", "123.215.15.230", "202.120.48.31", "59.51.73.213", "101.44.3.50", "183.136.213.96", "14.119.43.34", "218.20.227.183", "59.37.163.176", "213.169.66.145", "93.183.155.80", "92.247.125.186", "176.104.99.180", "76.10.60.64", "190.147.134.51", "208.126.156.108", "208.91.89.167", "193.193.230.211", "77.220.195.42", "185.6.126.178", "217.20.82.7", "103.54.218.68", "221.1.215.138", "202.117.54.247", "36.85.90.163", "125.208.9.165", "223.25.99.162", "5.221.99.163", "185.14.248.79", "183.57.27.163", "182.61.7.141", "182.254.218.138", "211.147.240.86", "103.16.113.2", "115.29.37.249", "118.114.242.106", "222.187.224.202", "115.29.192.43", "61.160.212.43", "185.26.120.158", "218.82.84.88", "218.3.48.18", "190.11.225.222", "59.39.88.190", "221.214.208.226", "58.209.81.7", "50.30.34.30", "122.200.2.1", "112.124.35.165", "61.177.248.202", "222.188.10.1", "79.116.217.61", "41.33.238.164", "91.103.26.186", "92.51.77.126", "213.169.83.105", "46.185.123.41", "193.192.37.130", "109.254.143.7", "82.208.95.64", "207.210.220.165", "60.191.157.20", "218.28.254.107", "177.130.59.66", "124.193.33.233", "58.9.99.41", "200.46.94.194", "49.1.244.139", "119.40.96.91", "120.24.14.154", "218.7.170.190", "118.144.177.254", "124.206.111.158", "101.200.165.51", "120.25.84.211", "218.7.156.202", "124.193.9.6", "119.29.97.169", "60.191.177.146", "201.16.175.97", "203.91.121.76", "124.193.58.10", "218.3.230.2", "202.110.67.25", "49.51.11.120", "121.139.156.58", "123.7.82.20", "115.29.34.2", "201.48.34.200", "211.161.103.249", "222.184.95.5", "200.108.138.118", "182.92.148.71", "106.37.177.251", "177.69.106.90", "200.223.213.142", "200.5.118.29", "14.136.207.38", "200.223.193.130", "101.99.22.40", "189.89.227.117", "190.151.32.58", "186.203.134.5", "190.202.82.236", "203.66.159.45", "203.66.159.46", "203.66.159.44", "222.198.155.63", "61.153.241.211", "181.39.11.92", "60.191.175.54", "124.206.22.120", "61.160.212.74", "121.207.6.126", "61.153.201.187", "60.191.157.155", "60.191.161.28", "60.191.174.13", "221.206.209.251", "60.191.167.93", "122.226.128.251", "60.191.164.22", "203.162.69.22", "218.90.174.167", "115.231.223.235", "114.55.35.64", "61.153.110.120", "112.74.25.121", "180.169.18.145", "179.184.236.112", "200.243.232.196", "101.200.178.46", "101.200.178.58", "101.200.179.38", "101.200.174.11", "101.200.182.29", "220.248.229.45", "114.215.150.13", "193.194.69.36", "164.132.57.130", "194.177.199.13", "151.80.136.137", "87.255.70.228", "92.222.81.186", "218.75.0.83", "60.191.180.38", "178.62.247.158", "122.96.59.102", "190.63.140.70", "78.40.181.45", "185.82.97.50", "88.159.172.245", "122.96.59.99", "112.23.1.167", "222.122.9.46", "78.20.155.172", "107.151.136.198", "178.155.14.10", "124.133.230.254", "107.151.142.114", "46.245.59.111", "107.151.136.220", "61.135.217.16", "61.135.217.7", "61.135.217.15", "61.135.217.12", "61.135.217.14", "61.135.217.13", "221.5.70.178", "107.151.136.202", "106.38.251.62", "27.115.75.114", "61.135.217.17", "61.135.217.10", "61.135.217.9", "61.135.217.3", "110.81.238.173", "58.246.242.154", "108.165.33.6", "188.158.226.123", "149.154.64.225", "119.122.255.100", "112.124.113.155", "119.29.199.145", "122.96.59.106", "163.177.159.144", "183.111.169.203", "61.162.223.41", "101.96.11.32", "101.96.11.30", "101.96.10.37", "101.96.11.32", "101.96.10.36", "101.96.11.44", "101.96.10.43", "101.96.10.35", "101.96.11.36", "101.96.10.38", "101.96.10.37", "101.96.10.32", "117.135.199.3", "42.118.216.219", "42.118.216.219", "101.96.11.32", "101.96.11.43", "101.96.11.38", "101.96.11.37", "101.96.11.44", "101.96.10.37", "101.96.10.35", "101.96.10.31", "101.96.11.29", "101.96.10.42", "101.96.11.45", "101.96.10.45", "101.96.10.40", "123.56.28.108", "62.117.96.138", "41.87.64.51", "107.151.136.213", "122.96.59.102", "222.176.112.10", "218.29.111.106", "101.96.10.39", "101.96.11.38", "101.96.11.29", "101.96.10.32", "101.96.11.29", "218.244.140.99", "101.254.188.198", "183.111.169.204", "101.96.11.36", "101.96.11.33", "101.96.10.37", "101.96.10.36", "111.23.6.166", "101.96.11.37", "101.96.11.43", "101.96.11.32", "101.96.10.32", "101.96.11.44", "101.96.11.30", "101.96.10.36", "107.151.152.214", "121.22.252.248", "202.231.218.217", "107.151.136.204", "138.36.27.5", "222.39.112.12", "117.184.117.229", "101.96.10.33", "121.40.197.114", "115.159.67.62", "183.111.169.204", "43.226.162.107", "101.71.90.182", "101.96.10.42", "101.96.10.41", "150.138.142.242", "101.96.11.43", "101.96.11.36", "101.96.11.35", "101.96.10.39", "111.23.6.163", "101.96.11.37", "101.96.11.36", "101.96.11.45", "101.96.11.31", "101.96.10.40", "115.159.50.187", "124.88.67.9", "122.225.107.145", "124.202.166.166", "120.52.72.20", "202.100.167.182", "202.100.167.137", "101.96.10.29", "101.96.10.44", "101.96.10.38", "101.96.10.33", "101.96.10.29", "101.96.11.39", "101.96.11.31", "101.96.11.32", "101.96.11.39", "101.96.10.44", "101.96.11.36", "101.96.11.41", "101.96.10.47", "101.96.10.30", "101.96.10.42", "101.96.10.39", "101.96.10.39", "122.96.59.99", "101.26.38.162", "119.29.27.158", "114.66.7.140", "101.96.10.45", "41.87.64.50", "122.96.59.106", "92.46.125.177", "113.107.57.76", "101.96.11.39", "101.96.11.44", "101.96.10.36", "101.96.10.33", "101.96.11.43", "101.96.11.30", "120.55.160.110", "212.38.166.231", "197.243.50.242", "113.107.57.76", "60.18.147.10", "101.96.10.35", "101.96.10.41", "101.96.11.38", "101.96.10.39", "58.49.165.172", "182.253.16.114", "101.96.11.44", "101.96.10.35", "101.96.10.29", "121.22.252.241", "107.151.136.194", "123.56.228.224", "27.254.47.203", "101.96.10.42", "101.96.10.47", "101.96.10.44", "101.96.11.31", "183.91.33.43", "101.96.11.38", "101.96.11.29", "101.96.10.38", "101.96.10.29", "103.231.66.49", "43.226.162.110", "43.226.162.110", "124.88.67.9", "183.111.169.205", "121.41.110.73", "101.96.10.42", "101.96.11.43", "101.96.10.39", "101.96.10.38", "101.96.10.36", "101.96.10.31", "101.96.11.45", "101.96.11.42", "101.96.11.29", "41.87.64.48", "101.96.11.30", "183.91.33.75", "101.96.11.42", "101.96.11.29", "101.96.11.37", "101.96.10.39", "101.96.11.38", "101.96.11.44", "101.96.10.29", "101.96.11.32", "101.96.10.43", "101.96.11.35", "101.96.10.39", "101.96.10.36", "101.96.10.29", "101.96.11.42", "101.96.10.38", "101.96.10.33", "101.96.11.41", "101.96.10.31", "101.96.11.47", "101.96.11.41", "101.96.11.36", "101.96.11.32", "101.96.11.29", "101.96.10.35", "101.96.10.30", "101.96.11.37", "111.23.6.147", "207.62.234.53", "101.26.38.162", "60.190.252.29", "61.153.17.62", "52.53.236.138", "43.226.162.107", "120.52.72.19", "210.21.113.236", "58.253.238.243", "120.52.27.17", "101.96.11.44", "101.96.11.41", "101.96.11.38", "101.96.11.29", "101.96.11.43", "183.111.169.203", "201.248.252.243", "101.96.10.39", "101.96.10.39", "101.96.11.32", "101.96.11.43", "111.23.6.166", "101.96.11.37", "101.96.11.35", "101.96.10.45", "101.96.10.33", "23.88.232.193", "101.96.11.36", "101.96.11.39", "101.96.11.35", "101.96.11.29", "101.96.10.42", "101.96.10.33", "122.96.59.99", "124.88.67.54", "46.143.225.70", "60.194.100.51", "173.201.183.172", "183.91.33.44", "111.23.6.141", "101.96.10.45", "101.96.10.29", "101.96.10.41", "101.96.10.38", "111.23.6.161", "210.96.153.20", "120.52.72.21", "202.100.167.160", "101.66.253.22", "122.225.106.35", "111.23.6.136", "122.96.59.102", "120.55.160.110", "115.231.223.235", "101.96.11.45", "212.1.227.182", "115.238.154.12", "120.25.171.183", "113.161.33.51", "107.151.142.117", "190.63.140.71", "112.126.68.206", "5.57.32.99", "183.91.33.74", "183.91.33.41", "183.91.33.76", "101.96.11.47", "101.96.11.31", "101.96.11.33", "107.151.152.219", "121.22.252.248", "120.52.73.96", "121.22.252.241", "212.120.163.170", "120.52.72.23", "120.52.72.24", "202.100.167.142", "202.100.167.145", "115.87.176.99", "101.96.11.35", "101.96.11.31", "101.96.11.39", "101.96.11.30", "101.96.11.39", "101.96.10.39", "175.25.176.50", "101.96.11.44", "101.96.11.44", "101.96.11.33", "101.96.10.39", "101.96.10.36", "101.96.11.39", "101.96.11.41", "101.96.10.43", "101.96.10.47", "101.96.10.35", "101.96.11.42", "101.96.11.41", "101.96.11.40", "101.96.11.38", "101.96.11.31", "101.96.10.32", "101.96.10.31", "101.96.10.33", "101.96.10.32", "101.96.10.30", "124.88.67.54", "124.88.67.9", "199.115.117.212", "123.56.28.196", "101.26.38.162", "101.96.11.29", "101.96.11.42", "178.252.132.244", "202.117.58.229", "101.96.11.37", "101.96.10.43", "64.12.235.2", "122.96.59.99", "61.8.35.166", "52.196.158.79", "103.30.42.89", "124.88.67.9", "124.88.67.9", "115.132.252.178", "218.106.205.145", "177.223.63.30", "121.22.252.248", "92.245.170.251", "210.245.25.229", "119.93.82.148", "210.245.25.229", "101.96.11.33", "101.96.11.36", "101.96.10.42", "101.96.11.47", "101.96.11.37", "101.96.10.41", "101.96.10.40", "101.96.10.39", "101.96.11.38", "101.96.11.32", "101.96.10.47", "101.96.11.35", "101.96.10.40", "101.96.11.29", "101.96.11.29", "101.96.10.32", "111.23.6.163", "183.91.33.43", "183.91.33.41", "101.96.11.44", "101.96.11.44", "101.96.10.43", "101.96.10.43", "101.96.10.31", "101.96.10.45", "101.96.10.42", "101.96.10.41", "101.96.10.37", "101.96.10.33", "111.23.6.147", "101.96.10.32", "101.96.10.32", "101.96.10.31", "101.96.10.29", "101.96.11.47", "101.96.11.43", "101.96.11.41", "101.96.11.39", "101.96.11.36", "101.96.11.45", "101.96.11.30", "101.96.10.45", "101.96.11.45", "101.96.11.30", "101.96.11.37", "101.96.11.31", "101.96.11.29", "101.96.10.44", "101.96.10.41", "101.96.11.37", "101.96.10.41", "101.96.11.33", "101.96.11.35", "101.96.11.29", "101.96.11.33", "101.96.11.35", "101.96.10.33", "101.96.10.32", "101.96.10.32", "101.96.10.35", "101.96.10.41", "101.96.11.29", "101.96.11.35", "101.96.10.38", "101.96.11.43", "101.96.11.47", "111.23.6.140", "101.96.11.43", "101.96.11.40", "101.96.11.33", "101.96.11.30", "101.96.10.36", "101.96.11.38", "101.96.10.41", "101.96.10.33", "101.96.10.35", "41.160.187.186", "168.102.134.47", "101.26.38.162", "101.26.38.162", "104.255.64.79", "195.138.78.143", "101.96.11.36", "101.96.10.35", "101.96.11.35", "114.217.102.244", "92.46.125.177", "92.46.122.98", "213.136.89.121", "122.225.106.36", "89.140.125.17", "220.249.21.222", "222.45.196.46", "183.91.33.42", "202.100.167.180", "202.100.167.170", "115.238.154.11", "101.96.10.40", "101.96.11.32", "101.96.11.30", "101.96.10.45", "107.151.136.206", "106.75.128.90", "51.255.197.171", "114.95.145.25", "121.22.252.241", "120.52.72.77", "120.52.72.65", "183.91.33.75", "183.91.33.42", "183.91.33.50", "183.91.33.76", "183.91.33.44", "183.91.33.74", "101.96.11.47", "101.96.11.43", "101.96.11.36", "101.96.11.35", "101.96.10.42", "101.96.11.39", "101.96.10.44", "101.96.10.39", "101.96.10.37", "101.96.10.36", "101.96.10.31", "43.226.162.110", "106.75.128.89", "203.195.204.168", "43.226.162.107", "58.247.30.222", "202.100.167.144", "101.71.90.183", "62.219.95.13", "117.135.199.3", "101.96.11.42", "101.96.11.40", "101.96.11.39", "101.96.10.36", "101.96.10.47", "101.96.10.47", "101.96.10.38", "101.96.10.31", "101.96.10.44", "101.96.10.43", "101.96.10.41", "101.96.10.37", "101.96.11.30", "101.96.11.33", "111.23.6.164", "122.227.56.138", "43.247.108.18", "182.36.167.121", "119.188.94.145", "24.205.244.90", "79.127.117.120", "45.63.22.81", "104.236.96.137", "65.25.237.114", "222.98.44.125", "60.11.11.163", "119.29.172.27", "119.29.198.97", "122.141.74.114", "101.251.127.37", "201.90.120.194", "200.55.138.202", "60.11.10.173", "115.159.220.207", "98.198.18.194", "211.20.254.41", "177.194.136.117", "218.27.180.103", "219.145.220.221", "183.61.240.138", "128.199.143.132", "200.153.145.109", "177.19.158.160", "128.199.108.172", "139.59.195.252", "59.175.238.41", "217.106.65.253", "149.202.60.72", "200.203.146.201", "188.166.230.62", "139.59.225.92", "60.11.8.35", "222.185.229.56", "198.50.142.47", "46.37.193.74", "218.57.236.103", "190.52.39.238", "188.166.184.158", "128.199.225.142", "212.220.76.246", "188.166.235.46", "103.59.216.113", "186.232.31.60", "187.11.201.236", "113.53.230.199", "178.62.238.17", "60.218.246.22", "218.10.97.115", "190.202.116.101", "210.254.22.13", "128.199.176.180", "128.199.171.32", "188.166.212.235", "128.199.100.198", "103.253.146.197", "128.199.225.142", "188.166.237.140", "1.179.201.18", "187.106.104.50", "186.177.17.131", "93.79.133.235", "118.144.175.225", "189.2.65.120", "177.55.158.18", "1.179.183.27", "188.166.188.212", "128.199.176.180", "179.212.243.58", "92.222.92.242", "185.46.10.13", "101.64.239.195", "200.153.145.109", "128.199.189.90", "188.166.212.235", "43.249.38.78", "139.59.225.92", "128.199.176.180", "218.75.10.171", "110.77.141.82", "176.9.192.146", "125.16.240.197", "176.31.216.137", "123.63.242.115", "149.202.60.72", "77.120.102.84", "58.247.125.205", "128.199.69.60", "128.199.140.147", "128.199.143.132", "188.166.211.241", "188.166.222.101", "188.166.212.235", "128.199.225.142", "115.231.16.175", "198.50.215.224", "8.26.61.69", "107.6.181.236", "149.202.60.72", "177.92.128.42", "189.111.183.125", "128.199.238.57", "188.166.184.163", "187.217.98.135", "89.32.247.57", "188.166.237.111", "181.211.253.14", "115.231.16.138", "8.26.61.71", "136.243.214.242", "217.117.0.155", "186.27.126.130", "200.123.138.229", "60.11.8.34", "188.166.188.219", "45.64.97.53", "128.199.124.10", "188.166.211.241", "139.59.234.213", "128.199.225.142", "210.97.241.191", "139.59.195.252", "139.59.234.213", "188.166.235.46", "181.211.253.202", "177.206.4.65", "128.199.197.248", "202.69.40.173", "193.150.125.238", "8.26.61.70", "217.77.58.165", "188.166.212.235", "host251.pool170.tecnoadsl.it", "free-02.nullvpn.com", "cyberfrost.ddns.net", "bigdaddy1.codediaries.com", "ip-166-62-82-206.ip.secureserver.net", "18989227117.prontonet.com.br", "014136207038.static.ctinets.com", "mailcontrolsp01-mtc01.evip.aol.com", "mxb74.ramter.eu", "130.ip-164-132-57.eu", "host-91-103-26-186.customers.adc.am", "root.kctus.fr", "ip-50-63-188-25.ip.secureserver.net", "66-59-130-177.redewsp.com.br", "free-02.nullvpn.com", "cm-58-9-99-41.revip16.asianet.co.th"])
valid_proxies = []
for i in range(100):
    try:
        request = req_proxy.generate_proxied_request(url)
        if request and request.status_code in [200, 204]:
            if req_proxy.rand_proxy not in valid_proxies:
                valid_proxies.append(req_proxy.rand_proxy)
                logger.debug("--Added: %s" % (req_proxy.rand_proxy,))
                logger.debug("valid_proxies: %s" % (valid_proxies,))
                req_proxy.proxy_list.remove(req_proxy.rand_proxy)
        else:
            req_proxy.proxy_list.remove(req_proxy.rand_proxy)
    except:
        pass
    if len(req_proxy.proxy_list) == 0:
        break
logger.debug("num of valid_proxies: %s" % (len(valid_proxies),))
logger.debug("final valid_proxies: %s" % (valid_proxies,))
